<div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
        <h1>
            {{titleAction | translate }} {{'CUSTOMER.CUSTOMER_LABLE_TITLE' | translate }}
        </h1>
        <ol class="breadcrumb">
            <li><a href="#"><i class="fa fa-dashboard"></i> {{'SIDEBAR.MAIN_NAVIGATION' | translate }}</a></li>
            <li><a href="#">{{'SIDEBAR.CUSTOMER' | translate }}</a></li>
            <li class="active">{{titleAction | translate }} {{'CUSTOMER.CUSTOMER_LABLE_TITLE' | translate }}</li>
        </ol>
    </section>

    <!-- Main content -->
    <section class="content">
        <div class="row">
            <div class="col-md-12">
                <div class="nav-tabs-custom">
                    <ul class="nav nav-tabs">
                        <li class="active"><a href="#detail" data-toggle="tab">Thông tin chung</a></li>
                        <li><a href="#product" data-toggle="tab">Hợp đồng</a></li>
                        <li><a href="#timeline" data-toggle="tab">Lịch sử giao tiếp</a></li>
                        <button type="button" (click)="goBack()" class="btn btn-back-on-tab btn-warning pull-right">Quay
                            lại
                        </button>
                    </ul>
                    <div class="tab-content">
                        <div class="active tab-pane" id="detail">
                            <form class="form-horizontal" #form="ngForm">
                                <div class="box-body">
                                    <div class="row">
                                        <div class="form-group col-sm-6">
                                            <label for="code" class="col-sm-3 control-label">Mã khách
                                                hàng</label>
                                            <div class="col-sm-9">
                                                <input [(ngModel)]="detail.code" type="text" class="form-control"
                                                       id="code" name="code" disabled>
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-6">
                                            <label for="type" class="col-sm-3 control-label text-red">Loại</label>
                                            <div class="col-sm-9"
                                                 [ngClass]="(type.touched && !type.valid)? 'has-error': ''">
                                                <select [(ngModel)]="detail.type" class="form-control"
                                                        id="type"
                                                        #type="ngModel"
                                                        name="type" title="Loại cá nhân, tổ chức" required>
                                                    <option value=""></option>
                                                    <option value="tc">Tổ chức</option>
                                                    <option value="cn">Cá nhân</option>
                                                </select>
                                                <div [hidden]="type.valid || type.untouched">
                                                    <span *ngIf="type.errors && type.errors.required"
                                                          class="help-block">
                                                        Phải chọn loại cá nhân hay tổ chức!
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <label class="title-break">Thông tin doanh nghiệp</label>
                                    <div class="row">
                                        <div class="form-group col-sm-6">
                                            <label for="company_code" class="col-sm-3 control-label text-red">Mã
                                                số</label>
                                            <div class="col-sm-9"
                                                 [ngClass]="(company_code.touched && !company_code.valid)? 'has-error': ''">
                                                <input [(ngModel)]="detail.company_code" type="text"
                                                       class="form-control"
                                                       #company_code="ngModel"
                                                       id="company_code" name="company_code"
                                                       placeholder="Mã số doanh nghiệp" required>
                                                <div [hidden]="company_code.valid || company_code.untouched">
                                                    <span *ngIf="company_code.errors && company_code.errors.required"
                                                          class="help-block">
                                                        Phải nhập mã số doanh nghiệp!
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-6">
                                            <label for="company_phone_number" class="col-sm-3 control-label text-red">Số
                                                điện thoại</label>
                                            <div class="col-sm-9"
                                                 [ngClass]="(company_phone_number.touched && !company_phone_number.valid)? 'has-error': ''">
                                                <input [(ngModel)]="detail.company_phone_number" type="text"
                                                       class="form-control"
                                                       #company_phone_number="ngModel"
                                                       id="company_phone_number" name="company_phone_number"
                                                       placeholder="Số điện thoại doanh nghiệp" required>
                                                <div [hidden]="company_phone_number.valid || company_phone_number.untouched">
                                                    <span *ngIf="company_phone_number.errors && company_phone_number.errors.required"
                                                          class="help-block">
                                                        Phải nhập số điện thoại doanh nghiệp!
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-sm-6">
                                            <label for="company_name"
                                                   class="col-sm-3 control-label text-red">Tên</label>
                                            <div class="col-sm-9"
                                                 [ngClass]="(company_name.touched && !company_name.valid)? 'has-error': ''">
                                                <input [(ngModel)]="detail.company_name" type="text"
                                                       class="form-control"
                                                       #company_name="ngModel"
                                                       id="company_name" name="company_name"
                                                       placeholder="Tên doanh nghiệp" required>
                                                <div [hidden]="company_name.valid || company_name.untouched">
                                                    <span *ngIf="company_name.errors && company_name.errors.required"
                                                          class="help-block">
                                                        Phải nhập tên doanh nghiệp!
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-6">
                                            <label for="company_email"
                                                   class="col-sm-3 control-label text-red">Email</label>
                                            <div class="col-sm-9"
                                                 [ngClass]="(company_email.touched && !company_email.valid)? 'has-error': ''">
                                                <input [(ngModel)]="detail.company_email" type="text"
                                                       class="form-control"
                                                       #company_email="ngModel"
                                                       id="company_email" name="company_email"
                                                       placeholder="Email doanh nghiệp" required>
                                                <div [hidden]="company_email.valid || company_email.untouched">
                                                    <span *ngIf="company_email.errors && company_email.errors.required"
                                                          class="help-block">
                                                        Phải nhập email doanh nghiệp!
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-sm-6">
                                            <label for="company_type" class="col-sm-3 control-label">Loại hình</label>
                                            <div class="col-sm-9">
                                                <select [(ngModel)]="detail.company_type" class="form-control"
                                                        id="company_type"
                                                        name="company_type" title="Loại hình">
                                                    <option value=""></option>
                                                    <option value="tnhh">TNHH</option>
                                                    <option value="cp">Công ty cổ phần</option>
                                                    <option value="dnnn">Doanh nghiệp nhà nước</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-6">
                                            <label for="company_fields" class="col-sm-3 control-label">Lĩnh vực</label>
                                            <div class="col-sm-9">
                                                <select [(ngModel)]="detail.company_fields" class="form-control"
                                                        id="company_fields"
                                                        name="company_fields" title="Lĩnh vực">
                                                    <option value=""></option>
                                                    <option value="xuatban">Xuất bản</option>
                                                    <option value="cntt">Công nghệ thông tin</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-sm-6">
                                            <label for="company_website"
                                                   class="col-sm-3 control-label">Website</label>
                                            <div class="col-sm-9">
                                                <input [(ngModel)]="detail.company_website" type="text"
                                                       class="form-control"
                                                       id="company_website" name="company_website"
                                                       placeholder="Website doanh nghiệp">
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-6">
                                            <label for="company_address"
                                                   class="col-sm-3 control-label">Địa chỉ</label>
                                            <div class="col-sm-9">
                                                <input [(ngModel)]="detail.company_address" type="text"
                                                       class="form-control"
                                                       id="company_address" name="company_address"
                                                       placeholder="Địa chỉ doanh nghiệp">
                                            </div>
                                        </div>
                                    </div>
                                    <label class="title-break">Thông tin liên hệ</label>
                                    <div class="row">
                                        <div class="form-group col-sm-6">
                                            <label for="name" class="col-sm-3 control-label text-red">Họ và tên</label>
                                            <div class="col-sm-9"
                                                 [ngClass]="(name.touched && !name.valid)? 'has-error': ''">
                                                <input [(ngModel)]="detail.name" type="text" class="form-control"
                                                       #name="ngModel"
                                                       id="name" name="name"
                                                       placeholder="Họ và tên khách hàng" required>
                                                <div [hidden]="name.valid || name.untouched">
                                                    <span *ngIf="name.errors && name.errors.required"
                                                          class="help-block">
                                                        Phải nhập họ và tên khách hàng!
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-6">
                                            <label for="gender" class="col-sm-3 control-label text-red">Giới
                                                tính</label>
                                            <div class="col-sm-9"
                                                 [ngClass]="(gender.touched && !gender.valid)? 'has-error': ''">
                                                <select [(ngModel)]="detail.gender" class="form-control"
                                                        id="gender"
                                                        #gender="ngModel"
                                                        name="gender" title="Giới tính" required>
                                                    <option value=""></option>
                                                    <option value="nam">Nam</option>
                                                    <option value="nu">Nữ</option>
                                                </select>
                                                <div [hidden]="gender.valid || gender.untouched">
                                                    <span *ngIf="gender.errors && gender.errors.required"
                                                          class="help-block">
                                                        Phải chọn giới tính!
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-sm-6">
                                            <label for="birthday" class="col-sm-3 control-label">Ngày sinh</label>
                                            <div class="col-sm-9">
                                                <input date-picker [(ngModel)]="detail.birthday" type="text"
                                                       class="form-control"
                                                       id="birthday" name="birthday"
                                                       placeholder="Ngày sinh khách hàng">
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-6">
                                            <label for="address" class="col-sm-3 control-label text-red">Địa chỉ</label>
                                            <div class="col-sm-9"
                                                 [ngClass]="(address.touched && !address.valid)? 'has-error': ''">
                                                <input [(ngModel)]="detail.address" type="text" class="form-control"
                                                       #address="ngModel"
                                                       id="address" name="address"
                                                       placeholder="Địa chỉ khách hàng" required>
                                                <div [hidden]="address.valid || address.untouched">
                                                    <span *ngIf="address.errors && address.errors.required"
                                                          class="help-block">
                                                        Phải nhập địa chỉ khách hàng!
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-sm-6">
                                            <label for="phone_number1" class="col-sm-3 control-label text-red">Số điện
                                                thoại 1</label>
                                            <div class="col-sm-9"
                                                 [ngClass]="(phone_number1.touched && !phone_number1.valid)? 'has-error': ''">
                                                <input [(ngModel)]="detail.phone_number1" type="text"
                                                       class="form-control"
                                                       #phone_number1="ngModel"
                                                       id="phone_number1" name="phone_number1"
                                                       placeholder="Số điện thoại 1" required>
                                                <div [hidden]="phone_number1.valid || phone_number1.untouched">
                                                    <span *ngIf="phone_number1.errors && phone_number1.errors.required"
                                                          class="help-block">
                                                        Phải nhập số điện thoại khách hàng!
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-6">
                                            <label for="phone_number2" class="col-sm-3 control-label">Số điện thoại
                                                2</label>
                                            <div class="col-sm-9">
                                                <input [(ngModel)]="detail.phone_number2" type="text"
                                                       class="form-control"
                                                       id="phone_number2" name="phone_number2"
                                                       placeholder="Số điện thoại 2">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-sm-6">
                                            <label for="email" class="col-sm-3 control-label text-red">Email</label>
                                            <div class="col-sm-9"
                                                 [ngClass]="(email.touched && !email.valid)? 'has-error': ''">
                                                <input [(ngModel)]="detail.email" type="text"
                                                       class="form-control"
                                                       #email="ngModel"
                                                       id="email" name="email"
                                                       placeholder="email" required>
                                                <div [hidden]="email.valid || email.untouched">
                                                    <span *ngIf="email.errors && email.errors.required"
                                                          class="help-block">
                                                        Phải nhập email khách hàng!
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-6">
                                            <label for="note" class="col-sm-3 control-label">Ghi chú</label>
                                            <div class="col-sm-9">
                                                <textarea [(ngModel)]="detail.note" name="note" id="note"
                                                          class="form-control"
                                                          rows="3" placeholder="Ghi chú"
                                                          maxlength="400"
                                                          #note="ngModel"></textarea>
                                            </div>
                                        </div>
                                    </div>
                                    <label class="title-break">Thông tin khác</label>
                                    <div class="row">
                                        <div class="form-group col-sm-6">
                                            <label for="group" class="col-sm-3 control-label">Nhóm</label>
                                            <div class="col-sm-9">
                                                <select [(ngModel)]="detail.group" class="form-control"
                                                        id="group"
                                                        name="group" title="Nhóm khách hàng">
                                                    <option value=""></option>
                                                    <option value="sach">In sách</option>
                                                    <option value="bao">In báo</option>
                                                    <option value="toroi">In tờ rơi</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group col-sm-6">
                                            <label for="source" class="col-sm-3 control-label">Nguồn</label>
                                            <div class="col-sm-9">
                                                <select [(ngModel)]="detail.source" class="form-control"
                                                        id="source"
                                                        name="source" title="Nguồn khách hàng">
                                                    <option value=""></option>
                                                    <option value="sale">Sale</option>
                                                    <option value="lanhdao">Lãnh đạo quan hệ</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- /.box-body -->
                                <div class="box-footer">
                                    <button *ngIf="recordId" (click)="showConfirm()" type="button"
                                            class="btn btn-danger">Xóa
                                    </button>
                                    <button type="button" [disabled]="!form.form.valid" (click)="saveRecord()"
                                            class="btn {{!form.form.valid? 'btn-default': 'btn-info'}} pull-right">Cập
                                        nhật
                                    </button>
                                </div>
                            </form>
                        </div>

                        <div class="tab-pane" id="product">
                            <div class="box box-primary">
                                <div class="box-header with-border">
                                    <h3 class="box-title">Danh sách hợp đồng</h3>
                                </div>
                                <div class="box-body no-padding">
                                    <div class="table-responsive mailbox-messages">
                                        <table class="table table-hover table-striped">
                                            <tbody>
                                            <tr>
                                                <th style="width: 10px">#</th>
                                                <th>Loại sản phẩm</th>
                                                <th>Tên sản phẩm</th>
                                                <th>Số lượng</th>
                                                <th>Kích thước</th>
                                                <th>Mô tả</th>
                                            </tr>
                                            <tr *ngFor="let prodItem of products">
                                                <td><input id="{{prodItem.id}}" name="{{prodItem.id}}"
                                                           title="Chọn hợp đồng"
                                                           type="checkbox"
                                                           [checked]=""
                                                           (change)="checkedItems(prodItem.id)"></td>
                                                <td class="mailbox-name">{{prodItem.producttypes.name}}</td>
                                                <td class="mailbox-name">{{prodItem.name}}</td>
                                                <td class="mailbox-name">{{prodItem.count}}</td>
                                                <td class="mailbox-name">{{prodItem.rong}}x{{prodItem.dai}}</td>
                                                <td class="mailbox-subject">{{prodItem.description}}</td>
                                            </tr>
                                            </tbody>
                                        </table>
                                        <!-- /.table -->
                                    </div>
                                    <!-- /.mail-box-messages -->
                                </div>
                                <!-- /.box-body -->
                            </div>
                        </div>

                        <!-- /.tab-pane -->
                        <div class="tab-pane" id="timeline">
                            <!-- The timeline -->
                            <ul class="timeline timeline-inverse">
                                <!-- timeline time label -->
                                <li class="time-label">
                        <span class="bg-red">
                          10 Feb. 2014
                        </span>
                                </li>
                                <!-- /.timeline-label -->
                                <!-- timeline item -->
                                <li>
                                    <i class="fa fa-envelope bg-blue"></i>

                                    <div class="timeline-item">
                                        <span class="time"><i class="fa fa-clock-o"></i> 12:05</span>

                                        <h3 class="timeline-header"><a href="#">Support Team</a> sent you an email</h3>

                                        <div class="timeline-body">
                                            Etsy doostang zoodles disqus groupon greplin oooj voxy zoodles,
                                            weebly ning heekya handango imeem plugg dopplr jibjab, movity
                                            jajah plickers sifteo edmodo ifttt zimbra. Babblely odeo kaboodle
                                            quora plaxo ideeli hulu weebly balihoo...
                                        </div>
                                        <div class="timeline-footer">
                                            <a class="btn btn-primary btn-xs">Read more</a>
                                            <a class="btn btn-danger btn-xs">Delete</a>
                                        </div>
                                    </div>
                                </li>
                                <!-- END timeline item -->
                                <!-- timeline item -->
                                <li>
                                    <i class="fa fa-user bg-aqua"></i>

                                    <div class="timeline-item">
                                        <span class="time"><i class="fa fa-clock-o"></i> 5 mins ago</span>

                                        <h3 class="timeline-header no-border"><a href="#">Sarah Young</a> accepted your
                                            friend request
                                        </h3>
                                    </div>
                                </li>
                                <!-- END timeline item -->
                                <!-- timeline item -->
                                <li>
                                    <i class="fa fa-comments bg-yellow"></i>

                                    <div class="timeline-item">
                                        <span class="time"><i class="fa fa-clock-o"></i> 27 mins ago</span>

                                        <h3 class="timeline-header"><a href="#">Jay White</a> commented on your post
                                        </h3>

                                        <div class="timeline-body">
                                            Take me to your leader!
                                            Switzerland is small and neutral!
                                            We are more like Germany, ambitious and misunderstood!
                                        </div>
                                        <div class="timeline-footer">
                                            <a class="btn btn-warning btn-flat btn-xs">View comment</a>
                                        </div>
                                    </div>
                                </li>
                                <!-- END timeline item -->
                                <!-- timeline time label -->
                                <li class="time-label">
                        <span class="bg-green">
                          3 Jan. 2014
                        </span>
                                </li>
                                <!-- /.timeline-label -->
                                <!-- timeline item -->
                                <li>
                                    <i class="fa fa-camera bg-purple"></i>

                                    <div class="timeline-item">
                                        <span class="time"><i class="fa fa-clock-o"></i> 2 days ago</span>

                                        <h3 class="timeline-header"><a href="#">Mina Lee</a> uploaded new photos</h3>

                                        <div class="timeline-body">
                                            <img src="http://placehold.it/150x100" alt="..." class="margin">
                                            <img src="http://placehold.it/150x100" alt="..." class="margin">
                                            <img src="http://placehold.it/150x100" alt="..." class="margin">
                                            <img src="http://placehold.it/150x100" alt="..." class="margin">
                                        </div>
                                    </div>
                                </li>
                                <!-- END timeline item -->
                                <li>
                                    <i class="fa fa-clock-o bg-gray"></i>
                                </li>
                            </ul>
                        </div>
                        <!-- /.tab-pane -->
                    </div>
                    <!-- /.tab-content -->
                </div>
            </div>
        </div>
    </section>
    <!-- /.content -->
</div>